// Generated by CoffeeScript 1.10.0
var slice = [].slice;

(function($, window) {
  var invoice;
  invoice = (function() {
    invoice.prototype.defaults = {
      access: 0,
      user_name: 'Default Name',
      data: {}
    };

    function invoice(el, options) {
      this.options = $.extend({}, this.defaults, options);
      this.$el = $(el);
    }

    invoice.prototype.init = function(u) {
      if (u == null) {
        u = '';
      }
      console.log(this.options);
      return this.getFirstData(this);
    };

    invoice.prototype.getDataD = function(u) {
      return echo_message_js('getDataD - ' + u);
    };

    invoice.prototype.myfunc = function(echo) {
      return this.$el.html(this.options.paramA + ': ' + echo);
    };

    invoice.prototype.getFirstData = function(_this) {
      var data, response;
      data = {
        AJAX: 'get_data'
      };
      response = {};
      $.ajax({
        url: "",
        type: "POST",
        data: data,
        dataType: "json",
        error: function(jqXHR, textStatus, errorThrown) {
          echo_message_js("AJAX Error: " + textStatus);
        },
        success: function(data, textStatus, jqXHR) {
          var myData;
          myData = JSON.parse(jqXHR.responseText);
          _this.options.access = myData.access;
          return _this.options.data = myData;
        }
      });
      return response;
    };

    invoice.prototype.createRow = function(obj) {
      return $.el.u({}, $.el.i({}, "This is underlined italicized"));
    };

    invoice.prototype.getData = function(ajax_name, options) {
      var data, i, len, response, task;
      if (options == null) {
        options = {};
      }
      for (i = 0, len = options.length; i < len; i++) {
        task = options[i];
        data.push(task);
      }
      data = {
        AJAX: ajax_name
      };
      response = {};
      return $.ajax({
        url: "",
        type: "POST",
        data: data,
        dataType: "json",
        error: function(jqXHR, textStatus, errorThrown) {
          echo_message_js("AJAX Error: " + textStatus);
        },
        success: function(data, textStatus, jqXHR) {
          console.log(response);
          return standard_response_handler(jqXHR.responseJSON);
        }
      });
    };

    return invoice;

  })();
  return $.fn.extend({
    invoice: function() {
      var args, option;
      option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      return this.each(function() {
        var $this, data;
        $this = $(this);
        data = $this.data('invoice');
        if (!data) {
          $this.data('invoice', (data = new invoice(this, option)));
        }
        if (typeof option === 'string') {
          return data[option].apply(data, args);
        }
      });
    }
  });
})(window.jQuery, window);

$(document).ready(function() {
  $('#js-main-invoice-table').invoice('init');
});
